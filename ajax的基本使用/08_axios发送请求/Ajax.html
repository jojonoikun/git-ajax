<!--
 * @Author: JOJOcode
 * @Date: 2022-11-15 18:21:21
 * @LastEditTime: 2022-11-16 20:21:32
 * @FilePath: \demo\08_axios发送请求\Ajax.html
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>axios发送请求</title>
    <script crossorigin="anonymous" src="https://cdn.bootcdn.net/ajax/libs/axios/1.1.3/axios.js"></script>
    <style>
        #dio{
            width: 200px;
            height: 100px;
            border: solid 1px #ccc;
        }
    </style>
</head>
<body>
    <button>GET</button>
    <button>POST</button>
    <button>通用AJAX方法发送</button>
    <div id="dio"></div>
    <script>
        const btns = document.getElementsByTagName("button");
        const dio = document.getElementById("dio");
       
        // 对路径的简化: baseURL
        axios.defaults.baseURL = "http://127.0.0.1:8000";

        btns[0].addEventListener("click",function(){
            axios.get('/axios-server',{
                //url参数
                params:{
                    id:100,
                    dio:"jojo",
                },
                // 请求头信息
                headers:{
                    name:"hututu",
                    bobodio:202
                }
            }).then(value =>{
                // jQuery是回调函数，axios是基于promise(ES6推出的异步编程的新的解决方案)的
                console.log(value);  //里面的data是响应体解析之后的结果(axios自动转成对象) data = { name: "niuyeye" }
            })
           
        })
        
        btns[1].onclick = function(){
            // 第一个参数是请求路径  第二个是请求体(请求体是一个data  json格式)   第三个是其他配置项
            axios.post('/axios-server',{
                username:"admin",
                password:"123456"
            },{
 // post请求可以同时设置 url参数 和 请求体，get请求不能同时设置(即get没有data)
            params:{
                id:306,
                pop:999
            },
            headers:{
                fan:"fansile",
                jini:"niganma"
            },

            })
        }

        btns[2].onclick = function(){
            axios({
            // 请求方法
            method:"POST",
            // url
            url:'/axios-server',
            // url参数
            params:{
                level:60,
                vip:606
            },
            //头信息
            headers:{
                a:100,
                b:200
            },
            // 请求体参数
             data:{
                username:"admin",
                password:"admin123"
            }
            }).then(res =>{
                console.log(res);
                console.log(res.data);
                console.log(res.data.name);
                console.log(JSON.parseJSON.stringify(this.config.data)(res.config.data));
            })
        }

    </script>
</body>
</html>